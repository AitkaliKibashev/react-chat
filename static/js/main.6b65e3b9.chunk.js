(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{59:function(e,t,a){},79:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return D})),a.d(t,"TempUserContext",(function(){return H}));var n=a(1),c=a(15),r=a.n(c),o=(a(79),a(18)),s=(a(59),a(39)),i=a.n(s),l=a(47),j=a(121),d=a(124),u=a(125),h=a(126),b=a(132),x=a(32),O="/login",m="/chat/:roomId?",p=a(31),f=a(7),g=function(){var e=Object(n.useContext)(D).auth,t=Object(p.a)(e),a=Object(o.a)(t,1)[0],c=Object(n.useContext)(H);return Object(f.jsx)(j.a,{position:"static",children:Object(f.jsxs)(d.a,{children:[Object(f.jsx)(u.a,{variant:"h6",children:a||c.user.displayName?"Chat":"Home"}),Object(f.jsx)(h.a,{container:!0,justifyContent:"flex-end",children:a||c.user.displayName?Object(f.jsx)(x.b,{to:O,style:{textDecoration:"none"},children:Object(f.jsx)(b.a,{onClick:function(){if(a)return Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signOut();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));localStorage.clear()},variant:"contained",color:"secondary",children:"Logout"})}):Object(f.jsx)(x.b,{to:O,style:{textDecoration:"none"},children:Object(f.jsx)(b.a,{variant:"contained",color:"secondary",children:"Login"})})})]})})},v=a(17),y=a(127),w=a(131),C=a(129),_=a(28),I=function(){var e=Object(n.useContext)(D).auth,t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],s=function(){var t=Object(l.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new _.a.auth.GoogleAuthProvider).addScope("https://www.googleapis.com/auth/contacts.readonly"),t.next=4,e.signInWithRedirect(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.jsx)(y.a,{children:Object(f.jsx)(h.a,{container:!0,style:{height:window.innerHeight-65},alignItems:"center",justifyContent:"center",children:Object(f.jsx)(h.a,{style:{width:400,background:"lightgray"},container:!0,justifyContent:"center",alignItems:"center",children:Object(f.jsxs)(w.a,{p:5,style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(f.jsx)(b.a,{onClick:s,variant:"outlined",children:"Login with Google"}),Object(f.jsx)("p",{style:{margin:"10px 0"},children:"Or log in as a temporary user"}),Object(f.jsxs)("div",{className:"temp-user-block",children:[Object(f.jsx)(C.a,{value:c,onChange:function(e){return r(e.target.value)},rowsMax:2,variant:"outlined",color:"secondary",label:"Name",style:{width:"70%"},size:"small"}),Object(f.jsx)(b.a,{onClick:function(){localStorage.setItem("name",c),window.location.reload(),r("")},variant:"outlined",color:"secondary",children:"Go"})]})]})})})})},N=a(133),k=a(56),S=a(128),A=function(){return Object(f.jsx)(y.a,{children:Object(f.jsx)(h.a,{container:!0,style:{height:window.innerHeight},alignItems:"center",justifyContent:"center",children:Object(f.jsx)(h.a,{container:!0,justifyContent:"center",alignItems:"center",children:Object(f.jsx)(S.a,{})})})})},L=Object(v.g)((function(e){var t=e.match,a=Object(n.useState)(""),c=Object(o.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(""),l=Object(o.a)(i,2),j=l[0],d=l[1],u=Object(n.useContext)(D),O=u.auth,m=u.firestore,g=Object(n.useContext)(H),v=Object(p.a)(O),w=Object(o.a)(v,1)[0],I=w||g.user,S=t.params.roomId,L=Object(k.a)(m.collection("messages").orderBy("createdAt")),M=Object(o.a)(L,1)[0],R=Object(k.a)(m.collection("rooms").orderBy("createdAt")),T=Object(o.a)(R,2),B=T[0];return T[1]?Object(f.jsx)(A,{}):Object(f.jsxs)(y.a,{children:[Object(f.jsx)("h1",{style:{marginTop:10},children:"Welcome to the my fucking CHAT"}),Object(f.jsxs)("div",{className:"chat-row",children:[Object(f.jsxs)("div",{style:{flex:1},className:"chat-row__chat-list",children:[Object(f.jsx)("h1",{children:"Rooms"}),Object(f.jsx)("div",{style:{flex:1},children:B?B.map((function(e){return Object(f.jsx)(x.b,{style:{textDecoration:"none"},to:"/chat/"+e.id,children:Object(f.jsx)("p",{className:"chat-row__chat-list__item",children:e.name})})})):null}),Object(f.jsxs)("div",{className:"chat-row__chat-list__footer",children:[Object(f.jsx)(C.a,{value:j,onChange:function(e){return d(e.target.value)},rowsMax:2,variant:"outlined",color:"secondary",label:"Room name",style:{width:"65%"}}),Object(f.jsx)(b.a,{onClick:function(){m.collection("rooms").add({id:Math.floor(1e3*Math.random()),uid:I.uid,name:j,createdAt:_.a.firestore.FieldValue.serverTimestamp()}),d("")},variant:"outlined",color:"secondary",children:"Create"})]})]}),Object(f.jsxs)("div",{className:"chat-row__chat-window",children:[Object(f.jsx)("div",{className:"chat-row__chat-window__chat",children:M?M.map((function(e){return S===e.roomId?Object(f.jsxs)("div",{className:e.uid===I.uid?"chat-row__chat-window__user-message-me":"chat-row__chat-window__user-message-other",children:[Object(f.jsxs)(h.a,{container:!0,alignItems:"center",children:[Object(f.jsx)(N.a,{src:e.photoURL,style:{marginRight:10}}),Object(f.jsx)("p",{children:e.displayName})]}),Object(f.jsx)("p",{style:{marginTop:5},children:e.text})]}):null})):null}),S?Object(f.jsxs)("div",{className:"chat-row__chat-window__footer",children:[Object(f.jsx)(C.a,{value:r,onChange:function(e){return s(e.target.value)},rowsMax:2,variant:"outlined",label:"Your text",style:{width:"90%"}}),Object(f.jsx)(b.a,{onClick:function(){var e=I.uid,t=I.displayName,a=I.photoURL;m.collection("messages").add({roomId:S,uid:e,displayName:t,photoURL:a,text:r,createdAt:_.a.firestore.FieldValue.serverTimestamp()}),s("")},variant:"outlined",color:"secondary",children:"Send"})]}):null]})]})]})})),M=[{path:O,Component:I}],R=[{path:m,Component:L}],T=function(){var e=Object(n.useContext)(D).auth,t=Object(n.useContext)(H),a=Object(p.a)(e);return Object(o.a)(a,1)[0]||t.user.displayName?Object(f.jsxs)(v.d,{children:[R.map((function(e){var t=e.path,a=e.Component;return Object(f.jsx)(v.b,{path:t,component:a,exact:!0},t)})),Object(f.jsx)(v.a,{to:m})]}):Object(f.jsxs)(v.d,{children:[M.map((function(e){var t=e.path,a=e.Component;return Object(f.jsx)(v.b,{path:t,component:a,exact:!0},t)})),Object(f.jsx)(v.a,{to:O})]})};var B=function(){var e=Object(n.useContext)(D).auth,t=Object(p.a)(e),a=Object(o.a)(t,3),c=(a[0],a[1]);return a[2],c?Object(f.jsx)(A,{}):Object(f.jsxs)(x.a,{children:[Object(f.jsx)(g,{}),Object(f.jsx)(T,{})]})};a(93),a(94);_.a.initializeApp({apiKey:"AIzaSyBpbPMLFA7wExzyxphf30ppEJusYv2dd_c",authDomain:"react-chat-66a99.firebaseapp.com",projectId:"react-chat-66a99",storageBucket:"react-chat-66a99.appspot.com",messagingSenderId:"918040955507",appId:"1:918040955507:web:90e31caec7d66d7eab3806"});var D=Object(n.createContext)(null),U=_.a.auth(),z=_.a.firestore(),H=Object(n.createContext)(null),P={user:{uid:Math.floor(1e3*Math.random(1e3)),displayName:localStorage.getItem("name"),photoURL:"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png"}};r.a.render(Object(f.jsx)(D.Provider,{value:{firebase:_.a,auth:U,firestore:z},children:Object(f.jsx)(H.Provider,{value:P,children:Object(f.jsx)(B,{})})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.6b65e3b9.chunk.js.map